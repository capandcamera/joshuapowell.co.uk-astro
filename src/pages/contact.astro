---
import Layout from '../layouts/BaseLayout.astro';

---

<Layout title='Contact Josh' description='Joshua Powell Photography - Contact Page'>
    <div class="container text-center">
        <div class="row h-100 gy-5">
          <div class="alert alert-success alert-dismissible fade show" role="alert">
            <strong>Message Sent</strong>
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
          </div>
          <div class="col-md-6 align-self-center">
            <h3 class="header-text">Send a Message</h3>
            <hr />
            <form id="contact-form" method="POST"
              action="https://script.google.com/macros/s/AKfycbw0zF9-UiNzgek4aeG5p1YjSUyDQY8zrjz5oDn4OG1p0hz6xNv5DFZsL7fWPEpCFJcS/exec">
              <br />
              <div id="form">
                <div class="mb-3 text-start">
                  <label for="form-name" class="form-label">Name</label>
                  <input id="form-name" name="Name" type="text" placeholder="Joe Bloggs" class="form-control" required>
                </div>
                <div class="mb-3 text-start">
                  <label for="form-email" class="form-label">Email Address</label>
                  <input id="form-email" name="Email" type="email" placeholder="name@example.com" class="form-control"
                    required>
                </div>
                <div class="mb-3 text-start">
                  <label for="form-message" class="form-label">Message</label>

                  <textarea id="form-message" rows="5" cols="60" maxlength="280" name="Message"
                    placeholder="Write a message here" class="form-control" required></textarea>
                  <br /><br />
                  <button id="contact-form-submit" class="form-control" type="submit">Send</button>
                </div>
              </div>
            </form>
          </div>
          <div class="col-md-6 align-self-center">
            <a href="https://twitter.com/joshpowellphoto">
              <i class="fa-brands fa-twitter social-link-icon-large">
              </i>
              <p class="contact-social-link">Tweet Me!</p>
            </a>
            <br /><br />
            <a href="https://github.com/capandcamera/joshuapowell.co.uk-astro">
              <i class="fa-brands fa-github social-link-icon-large">
              </i>
              <p class="contact-social-link">View this website on GitHub</p>

            </a>
            <br /><br />
            <a href="https://ko-fi.com/capandcamera">
              <i class="fa-solid fa-mug-hot social-link-icon-large">
              </i>
              <p class="contact-social-link">Donate Via Ko-Fi</p>

            </a>
          </div>
        </div>
      </div>
      <script>
        window.addEventListener("load", function () {
          $('.alert').hide()
          const form = document.getElementById('contact-form');
          form.addEventListener("submit", function (e) {
            e.preventDefault();
            $("#contact-form-submit").prop('disabled', true)
            $("#contact-form-submit").text('Sending....')
            // @ts-ignore
            const data = new FormData(form);
            // @ts-ignore
            const action = e.target.action;
            fetch(action, {
              method: 'POST',
              body: data,
            })
              .then(() => {
                $('.alert').show()
                $('input[name="Name"]').val('')
                $('input[name="Email"]').val('')
                $('textarea[name="Message"]').val('')
                $("#contact-form-submit").text('Send')
                $("#contact-form-submit").prop('disabled', false)
              })
          });
        });
      </script>
</Layout>

